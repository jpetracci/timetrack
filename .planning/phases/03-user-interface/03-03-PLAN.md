---
phase: 03-user-interface
plan: 03
type: execute
wave: 3
depends_on: ["03-01", "03-02"]
files_modified:
  - lib/ui/widgets/timer_header.dart
  - lib/ui/screens/projects_screen.dart
  - lib/widgets/project_card.dart
autonomous: true

must_haves:
  truths:
    - "Active project state is visually distinct with smooth transitions"
    - "Start/stop interactions provide immediate visual feedback"
    - "Failures to start/stop show an inline snackbar message"
  artifacts:
    - path: "lib/widgets/project_card.dart"
      provides: "Animated active/inactive styling"
    - path: "lib/ui/widgets/timer_header.dart"
      provides: "Animated header state and controls"
    - path: "lib/ui/screens/projects_screen.dart"
      provides: "Interaction handling with snackbars"
  key_links:
    - from: "lib/ui/screens/projects_screen.dart"
      to: "ScaffoldMessenger"
      via: "showSnackBar"
      pattern: "showSnackBar"
    - from: "lib/widgets/project_card.dart"
      to: "isActive/isRunning"
      via: "AnimatedContainer/AnimatedSwitcher"
      pattern: "Animated"
---

<objective>
Add visual feedback, transitions, and error cues that make timer interactions feel responsive and clear.

Purpose: Fulfill UX-03 and UX-04 with polished interaction states.
Output: Animated card/header states plus snackbar-based error feedback.
</objective>

<execution_context>
@/Users/joel/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/joel/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/03-user-interface/03-CONTEXT.md
@.planning/phases/03-user-interface/03-RESEARCH.md
@lib/ui/screens/projects_screen.dart
@lib/ui/widgets/timer_header.dart
@lib/widgets/project_card.dart
</context>

<tasks>

<task type="auto">
  <name>Task 1: Animate active/inactive project visuals</name>
  <files>
    lib/widgets/project_card.dart
  </files>
  <action>
    Add implicit animations to ProjectCard so active and running states transition smoothly (AnimatedContainer for background/border, AnimatedSwitcher or AnimatedOpacity for status text). Increase visual contrast for active projects (color, border, or elevation) while keeping inactive cards neutral. Keep animation durations short (150-250ms) to avoid sluggishness.
  </action>
  <verify>flutter analyze</verify>
  <done>Switching active projects animates the card styling changes and clearly distinguishes the active project.</done>
</task>

<task type="auto">
  <name>Task 2: Add header feedback and snackbar error handling</name>
  <files>
    lib/ui/widgets/timer_header.dart
    lib/ui/screens/projects_screen.dart
  </files>
  <action>
    Enhance TimerHeader to animate running/stopped state transitions (AnimatedSwitcher for label/button, subtle color change). Wrap start/stop calls in ProjectsScreen with try/catch and surface errors via ScaffoldMessenger.showSnackBar using a concise message. Ensure the UI still updates immediately on success and that snackbars only appear on failures.
  </action>
  <verify>flutter analyze</verify>
  <done>Header state changes animate smoothly, and failures to start/stop display a snackbar message.</done>
</task>

</tasks>

<verification>
- `flutter analyze`
- Manual sanity: toggle timers and observe card/header animations; confirm snackbar appears on forced error
</verification>

<success_criteria>
- Active project stands out visually with animated transitions
- User interactions provide clear feedback without haptics
</success_criteria>

<output>
After completion, create `.planning/phases/03-user-interface/03-03-SUMMARY.md`
</output>
