---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pubspec.yaml
  - lib/main.dart
  - lib/models/project.dart
  - lib/models/time_entry.dart
  - lib/services/local_storage.dart
autonomous: true
must_haves:
  truths:
    - "Projects (name + tags) can be created in memory and serialized for local storage"
    - "Time entries can be serialized to JSON and rehydrated from local storage"
    - "Local storage service can load and save projects and time entries"
  artifacts:
    - path: "pubspec.yaml"
      provides: "SharedPreferences + Riverpod dependencies"
      contains: "shared_preferences"
    - path: "lib/models/project.dart"
      provides: "Project model with tags and JSON serialization"
      contains: "class Project"
    - path: "lib/models/time_entry.dart"
      provides: "TimeEntry model with start/end and JSON serialization"
      contains: "class TimeEntry"
    - path: "lib/services/local_storage.dart"
      provides: "SharedPreferences-backed CRUD for projects and entries"
      contains: "class LocalStorage"
  key_links:
    - from: "lib/services/local_storage.dart"
      to: "shared_preferences"
      via: "SharedPreferences.getInstance"
      pattern: "SharedPreferences\\.getInstance"
    - from: "lib/services/local_storage.dart"
      to: "lib/models/project.dart"
      via: "Project.fromJson"
      pattern: "Project\\.fromJson"
---

<objective>
Bootstrap the Flutter project and define core data models with SharedPreferences-based persistence.

Purpose: Establish the foundation for local-only project and time entry storage.
Output: Flutter app scaffold, data models, and storage service.
</objective>

<execution_context>
@/Users/joel/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/joel/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Flutter scaffold and add dependencies</name>
  <files>pubspec.yaml, lib/main.dart</files>
  <action>
    Run `flutter create .` to initialize the app in the repo root.
    Add dependencies: `flutter_riverpod`, `shared_preferences`, and `uuid`.
    Update `lib/main.dart` to wrap the app in `ProviderScope` with a minimal `MaterialApp` home placeholder.
    Avoid Hive and any network-based storage libraries.
  </action>
  <verify>flutter pub get && flutter analyze</verify>
  <done>Flutter project builds and analyzes cleanly with required dependencies present.</done>
</task>

<task type="auto">
  <name>Task 2: Define core data models with JSON serialization</name>
  <files>lib/models/project.dart, lib/models/time_entry.dart</files>
  <action>
    Create `Project` with `id`, `name`, `tags: List<String>`, and `createdAt`.
    Create `TimeEntry` with `id`, `projectId`, `start`, and `end` (nullable until stopped).
    Implement `toJson`/`fromJson` using ISO-8601 strings for dates.
    Provide `copyWith` and helpers for duration in decimal hours.
  </action>
  <verify>flutter analyze</verify>
  <done>Models serialize/deserialize cleanly and expose duration helpers for later UI use.</done>
</task>

<task type="auto">
  <name>Task 3: Implement SharedPreferences local storage service</name>
  <files>lib/services/local_storage.dart</files>
  <action>
    Create `LocalStorage` with methods: `loadProjects`, `saveProjects`, `loadEntries`, `saveEntries`.
    Persist lists as JSON strings under stable keys (e.g., `projects`, `entries`).
    Include placeholder storage for active timer snapshot (projectId + start time) for phase 1 timer restore.
  </action>
  <verify>flutter analyze</verify>
  <done>SharedPreferences service can read/write project and entry lists without errors.</done>
</task>

</tasks>

<verification>
flutter analyze
</verification>

<success_criteria>
Core models and SharedPreferences storage exist and can round-trip project and time entry data.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
