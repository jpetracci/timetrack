---
phase: 06-platform-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [lib/utils/platform_detector.dart, lib/widgets/touch_optimized_button.dart, lib/widgets/hover_wrapper.dart, lib/widgets/project_card.dart, lib/ui/widgets/timer_header.dart, lib/widgets/time_entry_tile.dart, lib/main.dart]
autonomous: false

must_haves:
  truths:
    - "Touch interface feels natural on mobile with proper tap targets"
    - "Pointer interface works smoothly on web with hover states"
    - "All interactive elements adapt appropriately to touch vs pointer platforms"
    - "Visual feedback is consistent across all interaction types"
  artifacts:
    - path: "lib/utils/platform_detector.dart"
      provides: "Platform detection utilities for touch vs pointer"
      contains: "bool isTouchDevice, bool isPointerDevice"
    - path: "lib/widgets/touch_optimized_button.dart"
      provides: "Reusable touch-optimized button component"
      min_lines: 30
    - path: "lib/widgets/hover_wrapper.dart"
      provides: "Hover state wrapper for pointer interactions"
      min_lines: 25
    - path: "lib/widgets/project_card.dart"
      provides: "Updated project card with platform-adaptive interactions"
      contains: "MouseRegion, GestureDetector, 48dp minimum"
    - path: "lib/ui/widgets/timer_header.dart"
      provides: "Updated timer header with hover states"
      contains: "MouseRegion, hover feedback"
  key_links:
    - from: "lib/widgets/project_card.dart"
      to: "lib/utils/platform_detector.dart"
      via: "import and conditionally apply touch vs pointer optimizations"
      pattern: "PlatformDetector\\.isTouchDevice"
    - from: "lib/widgets/hover_wrapper.dart"
      to: "lib/widgets/project_card.dart"
      via: "wrap interactive elements with hover detection"
      pattern: "HoverWrapper\\(child:"
    - from: "lib/main.dart"
      to: "lib/utils/platform_detector.dart"
      via: "initialize platform detection in app wrapper"
      pattern: "PlatformDetector\\.initialize\\(\\)"
---

<objective>
Optimize touch interactions for mobile and hover states for web to create platform-adaptive user interfaces that feel natural on all devices.

Purpose: Platform polish requires understanding the input method (touch vs pointer) and providing appropriate feedback - larger tap targets for mobile and hover states for desktop/web interfaces.
Output: Platform-adaptive UI components with proper touch targets (48dp minimum) and hover feedback for pointer devices.
</objective>

<execution_context>
@/Users/joel/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/joel/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@/Users/joel/code/timetrack/.planning/phases/06-platform-polish/06-RESEARCH.md
@/Users/joel/code/timetrack/lib/widgets/project_card.dart
@/Users/joel/code/timetrack/lib/ui/widgets/timer_header.dart
@/Users/joel/code/timetrack/lib/widgets/time_entry_tile.dart
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create platform detection utility and touch/pointer components</name>
  <files>lib/utils/platform_detector.dart, lib/widgets/touch_optimized_button.dart, lib/widgets/hover_wrapper.dart</files>
  <action>Create platform detection utility:
- In lib/utils/platform_detector.dart, create static methods to detect touch vs pointer devices using MediaQuery and Platform checks
- Add isTouchDevice, isPointerDevice getters with appropriate logic for iOS/Android/web/desktop
- Create lib/widgets/touch_optimized_button.dart wrapper that enforces 48dp minimum tap targets using GestureDetector and InkWell
- Create lib/widgets/hover_wrapper.dart using MouseRegion for hover states with cursor changes and visual feedback
- Follow patterns from Flutter documentation for proper gesture handling and platform detection
- Ensure components work with existing Riverpod state management</action>
  <verify>Run flutter analyze and ensure no warnings, test component compilation</verify>
  <done>Platform detection utility created with touch/pointer detection, reusable touch-optimized and hover wrapper components available</done>
</task>

<task type="auto">
  <name>Task 2: Update ProjectCard with platform-adaptive interactions</name>
  <files>lib/widgets/project_card.dart</files>
  <action>Enhance ProjectCard with platform-specific optimizations:
- Import platform_detector.dart and touch/hover components
- Replace existing InkWell with TouchOptimizedButton for mobile (48dp minimum)
- Add HoverWrapper for desktop/web with mouse cursor changes and background color transitions
- Ensure tap target sizes meet Material Design guidelines (minimum 48dp)
- Add visual feedback for both touch (ripple effects) and pointer (hover states)
- Maintain existing functionality while improving interaction feedback
- Use AnimatedContainer for smooth hover transitions</action>
  <verify>Test on web browser with mouse hover, verify tap target sizes using Flutter inspector</verify>
  <done>ProjectCard adapts to touch vs pointer input with appropriate feedback and proper tap targets</done>
</task>

<task type="auto">
  <name>Task 3: Update timer header and time entry tiles with platform interactions</name>
  <files>lib/ui/widgets/timer_header.dart, lib/widgets/time_entry_tile.dart</files>
  <action>Apply platform-adaptive patterns to key UI components:
- In TimerHeader, add HoverWrapper around start/stop buttons for desktop hover states
- Ensure buttons meet 48dp minimum tap targets on mobile devices
- Add cursor changes and subtle hover effects for pointer interactions
- In TimeEntryTile, optimize edit/delete icon buttons for touch (larger tap areas)
- Add hover states to action buttons with visual feedback
- Wrap interactive elements with appropriate platform detection
- Maintain existing visual design while enhancing interaction feedback</action>
  <verify>Test button interactions on both touch and pointer devices, verify accessibility with semantic labels</verify>
  <done>Timer controls and time entry actions work naturally on both touch and pointer platforms</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete platform-adaptive interface with touch optimization and hover states</what-built>
  <how-to-verify>1. Test on mobile device or browser in touch mode:
   - Verify all buttons have adequate tap targets (48dp minimum)
   - Check ripple effects and touch feedback work properly
   - Ensure buttons respond reliably to taps

2. Test on web browser with mouse:
   - Verify hover states appear on all interactive elements
   - Check cursor changes to pointer on hoverable elements
   - Ensure smooth transitions and visual feedback

3. Cross-platform consistency:
   - Launch app on different platforms if possible
   - Verify platform detection works correctly
   - Check that interactions feel natural on each platform</how-to-verify>
  <resume-signal>Type "approved" if touch and pointer interactions work naturally, or describe issues</resume-signal>
</task>

</tasks>

<verification>
- Platform detection correctly identifies touch vs pointer devices
- All interactive elements meet 48dp minimum tap target size on mobile
- Hover states provide clear visual feedback on web/desktop
- Touch interactions feel responsive and reliable on mobile devices
- Platform-adaptive behavior works seamlessly without breaking existing functionality
- No Flutter analyzer warnings or runtime errors
</verification>

<success_criteria>
Touch interface feels natural on mobile with proper tap targets, pointer interface works smoothly on web with hover states, and all interactive elements adapt appropriately to the input method being used.
</success_criteria>

<output>
After completion, create `.planning/phases/06-platform-polish/06-01-SUMMARY.md`
</output>