---
phase: 01-foundation
plan: 03
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - lib/main.dart
  - lib/ui/home_screen.dart
  - lib/widgets/project_card.dart
  - lib/widgets/new_project_sheet.dart
  - lib/utils/decimal_time.dart
autonomous: true
must_haves:
  truths:
    - "User can create a project with name and tags"
    - "User can start/stop a timer with one tap from the project list"
    - "Running time is visible in decimal hours"
  artifacts:
    - path: "lib/ui/home_screen.dart"
      provides: "Main screen with project list and timer display"
      contains: "class HomeScreen"
    - path: "lib/widgets/new_project_sheet.dart"
      provides: "Project creation UI with tags input"
      contains: "class NewProjectSheet"
    - path: "lib/utils/decimal_time.dart"
      provides: "Decimal hours formatting helper"
      contains: "formatDecimalHours"
  key_links:
    - from: "lib/ui/home_screen.dart"
      to: "lib/state/timer_controller.dart"
      via: "Riverpod providers"
      pattern: "ref\\.watch\(timer"
    - from: "lib/ui/home_screen.dart"
      to: "lib/state/projects_state.dart"
      via: "project list provider"
      pattern: "projects"
---

<objective>
Build the basic UI for project creation and one-tap timer control using the state layer.

Purpose: Deliver a usable foundation screen that satisfies Phase 1 user flows.
Output: Home screen with project list, add project UI, and decimal timer display.
</objective>

<execution_context>
@/Users/joel/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/joel/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/REQUIREMENTS.md
@.planning/phases/01-foundation/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create home screen and project creation UI</name>
  <files>lib/ui/home_screen.dart, lib/widgets/new_project_sheet.dart, lib/main.dart</files>
  <action>
    Build `HomeScreen` with:
    - Top area showing active project name and running decimal hours
    - Project list with each item tappable to start/stop
    - Floating action button that opens `NewProjectSheet`
    Implement `NewProjectSheet` with fields for name and tags (comma-separated), and submit creates a project.
    Route `MaterialApp` home to `HomeScreen`.
  </action>
  <verify>flutter analyze</verify>
  <done>UI renders project list, active timer display, and a working new-project sheet.</done>
</task>

<task type="auto">
  <name>Task 2: Wire UI to timer/project state and decimal formatter</name>
  <files>lib/ui/home_screen.dart, lib/widgets/project_card.dart, lib/utils/decimal_time.dart</files>
  <action>
    Create `formatDecimalHours(Duration, int precision)` in `decimal_time.dart`.
    Add `ProjectCard` widget that shows project name, tags, and current timer state.
    Connect buttons/taps to `TimerController.start/stop/switchTo` using Riverpod providers.
    Ensure tapping a different project triggers auto-stop of the previous one via controller logic.
  </action>
  <verify>flutter analyze</verify>
  <done>One-tap start/stop works from the list and running time shows in decimal hours.</done>
</task>

</tasks>

<verification>
flutter analyze
</verification>

<success_criteria>
User can create projects with tags, start/stop with one tap, and see decimal running time.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-03-SUMMARY.md`
</output>
